
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Frequently Asked Questions &#8212; Drake Documentation</title>
    <link rel="stylesheet" href="_static/pyramid.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="For Developers" href="developers.html" />
    <link rel="prev" title="Getting Help" href="getting_help.html" />
<!--[if lte IE 6]>
<link rel="stylesheet" href="_static/ie6.css" type="text/css" media="screen" charset="utf-8" />
<![endif]-->

  </head>
  <body>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="developers.html" title="For Developers"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="getting_help.html" title="Getting Help"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Drake Documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="getting_help.html" accesskey="U">Getting Help</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="frequently-asked-questions">
<span id="faq"></span><h1>Frequently Asked Questions<a class="headerlink" href="#frequently-asked-questions" title="Permalink to this headline">¶</a></h1>
<p>..warning:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>This page is old. Please review :ref:`getting_help` for more up-to-date
information.
</pre></div>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first"><cite>Table of contents</cite></p>
<ul class="simple">
<li><a class="reference internal" href="#why-doesn-t-drake-visualizer-work-in-vmware-fusion-or-workstation" id="id4">Why doesn’t Drake Visualizer work in VMWare Fusion or Workstation?</a></li>
<li><a class="reference internal" href="#why-do-opengl-based-vtk-targets-run-with-bazel-test-sometimes-fail-on-linux" id="id5">Why do OpenGL-based VTK targets run with <code class="docutils literal"><span class="pre">bazel</span> <span class="pre">test</span></code> sometimes fail on Linux?</a></li>
<li><a class="reference internal" href="#why-do-i-get-linker-errors-when-i-build-a-cmake-project-using-drake-but-i-can-clearly-see-the-symbols" id="id6">Why do I get linker errors when I build a CMake project using Drake, but I can clearly see the symbols?</a></li>
</ul>
</div>
<div class="section" id="why-doesn-t-drake-visualizer-work-in-vmware-fusion-or-workstation">
<span id="faq-vmware"></span><h2><a class="toc-backref" href="#id4">Why doesn’t Drake Visualizer work in VMWare Fusion or Workstation?</a><a class="headerlink" href="#why-doesn-t-drake-visualizer-work-in-vmware-fusion-or-workstation" title="Permalink to this headline">¶</a></h2>
<p><strong>Symptom</strong>: The simulation runs and the visualization window appears, but no
objects are actually drawn. This appeared to be due to display drivers and/or
non support of hardware-accelerated rendering. To address this, go to
<code class="docutils literal"><span class="pre">Virtual</span> <span class="pre">Machine</span> <span class="pre">Settings</span></code>, and check the <code class="docutils literal"><span class="pre">Accelerate</span> <span class="pre">3D</span> <span class="pre">Graphics</span></code> box under
Display settings; now the simulations draw properly.</p>
</div>
<div class="section" id="why-do-opengl-based-vtk-targets-run-with-bazel-test-sometimes-fail-on-linux">
<span id="faq-opengl-test"></span><h2><a class="toc-backref" href="#id5">Why do OpenGL-based VTK targets run with <code class="docutils literal"><span class="pre">bazel</span> <span class="pre">test</span></code> sometimes fail on Linux?</a><a class="headerlink" href="#why-do-opengl-based-vtk-targets-run-with-bazel-test-sometimes-fail-on-linux" title="Permalink to this headline">¶</a></h2>
<p><strong>Symptom</strong>: While the binary works with <code class="docutils literal"><span class="pre">bazel</span> <span class="pre">run</span></code>, when you run a test using <code class="docutils literal"><span class="pre">bazel</span> <span class="pre">test</span></code>, such as:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ bazel test //systems/sensors:rgbd_camera_test
</pre></div>
</div>
<p>you encounter a slew of errors from VTK / OpenGL:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ERROR</span><span class="p">:</span> <span class="n">In</span> <span class="o">/</span><span class="n">vtk</span><span class="o">/</span><span class="n">Rendering</span><span class="o">/</span><span class="n">OpenGL2</span><span class="o">/</span><span class="n">vtkXOpenGLRenderWindow</span><span class="o">.</span><span class="n">cxx</span><span class="p">,</span> <span class="n">line</span> <span class="mi">820</span>
<span class="n">vtkXOpenGLRenderWindow</span> <span class="p">(</span><span class="mh">0x55880715b760</span><span class="p">):</span> <span class="n">failed</span> <span class="n">to</span> <span class="n">create</span> <span class="n">offscreen</span> <span class="n">window</span>

<span class="n">ERROR</span><span class="p">:</span> <span class="n">In</span> <span class="o">/</span><span class="n">vtk</span><span class="o">/</span><span class="n">Rendering</span><span class="o">/</span><span class="n">OpenGL2</span><span class="o">/</span><span class="n">vtkOpenGLRenderWindow</span><span class="o">.</span><span class="n">cxx</span><span class="p">,</span> <span class="n">line</span> <span class="mi">816</span>
<span class="n">vtkXOpenGLRenderWindow</span> <span class="p">(</span><span class="mh">0x55880715b760</span><span class="p">):</span> <span class="n">GLEW</span> <span class="n">could</span> <span class="ow">not</span> <span class="n">be</span> <span class="n">initialized</span><span class="o">.</span>

<span class="n">ERROR</span><span class="p">:</span> <span class="n">In</span> <span class="o">/</span><span class="n">vtk</span><span class="o">/</span><span class="n">Rendering</span><span class="o">/</span><span class="n">OpenGL2</span><span class="o">/</span><span class="n">vtkShaderProgram</span><span class="o">.</span><span class="n">cxx</span><span class="p">,</span> <span class="n">line</span> <span class="mi">453</span>
<span class="n">vtkShaderProgram</span> <span class="p">(</span><span class="mh">0x5588071d5aa0</span><span class="p">):</span> <span class="n">Shader</span> <span class="nb">object</span> <span class="n">was</span> <span class="ow">not</span> <span class="n">initialized</span><span class="p">,</span> <span class="n">cannot</span> <span class="n">attach</span> <span class="n">it</span><span class="o">.</span>

<span class="n">ERROR</span><span class="p">:</span> <span class="n">In</span> <span class="o">/</span><span class="n">vtk</span><span class="o">/</span><span class="n">Rendering</span><span class="o">/</span><span class="n">OpenGL2</span><span class="o">/</span><span class="n">vtkOpenGLRenderWindow</span><span class="o">.</span><span class="n">cxx</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1858</span>
<span class="n">vtkXOpenGLRenderWindow</span> <span class="p">(</span><span class="mh">0x55880715b760</span><span class="p">):</span> <span class="n">Hardware</span> <span class="n">does</span> <span class="ow">not</span> <span class="n">support</span> <span class="n">the</span> <span class="n">number</span> <span class="n">of</span> <span class="n">textures</span> <span class="n">defined</span><span class="o">.</span>
</pre></div>
</div>
<p><strong>Solution</strong>: The best workaround is to first mark the test as as <a class="reference external" href="https://docs.bazel.build/versions/master/be/general.html#genrule.local">local</a> in the <code class="docutils literal"><span class="pre">BUILD</span></code> file, either
with <code class="docutils literal"><span class="pre">local</span> <span class="pre">=</span> <span class="pre">1</span></code>, or <code class="docutils literal"><span class="pre">tags</span> <span class="pre">=</span> <span class="pre">[..,</span> <span class="pre">&quot;local&quot;],</span></code>. Doing so will make the specific target run without sandboxing, such that it has an environment similar to that of <code class="docutils literal"><span class="pre">bazel</span> <span class="pre">run</span></code>.</p>
<p>As an example, in <code class="docutils literal"><span class="pre">drake/systems/sensors/BUILD</span></code>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">drake_cc_googletest</span><span class="p">(</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;rgbd_camera_test&quot;</span><span class="p">,</span>
    <span class="c1"># ...</span>
    <span class="n">local</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="c1"># ...</span>
<span class="p">)</span>
</pre></div>
</div>
<p>If this does not work, then try running the test in Bazel without sandboxing:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ bazel test --spawn_strategy=standalone //systems/sensors:rgbd_camera_test
</pre></div>
</div>
<p>Please note that you can possibly add <code class="docutils literal"><span class="pre">--spawn_strategy=standalone</span></code> to your <code class="docutils literal"><span class="pre">~/.bazelrc</span></code>, but be aware that this means your development machine
may have a different environment than other development machines when running the test.</p>
</div>
<div class="section" id="why-do-i-get-linker-errors-when-i-build-a-cmake-project-using-drake-but-i-can-clearly-see-the-symbols">
<span id="faq-gcc-4-9"></span><h2><a class="toc-backref" href="#id6">Why do I get linker errors when I build a CMake project using Drake, but I can clearly see the symbols?</a><a class="headerlink" href="#why-do-i-get-linker-errors-when-i-build-a-cmake-project-using-drake-but-i-can-clearly-see-the-symbols" title="Permalink to this headline">¶</a></h2>
<p><strong>Symptom</strong>: You have followed one of the options in the <a class="reference internal" href="installation.html#installation-and-quick-start"><span class="std std-ref">Installation and Quickstart</span></a> instructions, and are writing a CMake project to use Drake.</p>
<p>You look at a unittest that builds in Drake, run it, and it builds, runs, and passes. However, when you try to use some of that functionality in your CMake project, you get a linker error, such as:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>undefined reference to `RigidBodyTree&lt;double&gt;::get_position_name(int) const&#39;
</pre></div>
</div>
<p>If you look at symbols in the Drake shared library (e.g. <code class="docutils literal"><span class="pre">nm</span> <span class="pre">-C</span></code> or <code class="docutils literal"><span class="pre">objdump</span> <span class="pre">-TC</span></code> with <code class="docutils literal"><span class="pre">grep</span></code>), you see the signature <code class="docutils literal"><span class="pre">RigidBodyTree&lt;double&gt;::get_position_name[abi:cxx11](int)</span></code>. However, if you look in the produced object code (which causes the linking to fail), you see <code class="docutils literal"><span class="pre">RigidBodyTree&lt;double&gt;::get_position_name(int)</span></code>.</p>
<p><strong>Solution</strong>: This is most likely due to an incompatibilty between the compiler used to produce Drake (e.g. <code class="docutils literal"><span class="pre">clang</span></code>) and the compiler that CMake has selected (e.g. <code class="docutils literal"><span class="pre">gcc-4.9</span></code>). Specifically, <code class="docutils literal"><span class="pre">gcc-4.9</span></code> or before does not tend to handle the DualABI well when linking against <code class="docutils literal"><span class="pre">clang</span></code>-compiled code <a class="footnote-reference" href="#dual-abi" id="id1">[1]</a>. You may be able to use other functions, because only functions that return an ABI-dependent class (e.g. <code class="docutils literal"><span class="pre">std::string</span></code>) are tagged with the ABI that they are using (since they cannot be distinguished in the function signature).</p>
<p>The fix is to change the compiler CMake is using. One way to do this is to set the <code class="docutils literal"><span class="pre">CC</span></code> and <code class="docutils literal"><span class="pre">CXX</span></code> environment variables to use a supported compiler. For a list of supported compilers, see <a class="reference internal" href="developers.html#supported-configurations"><span class="std std-ref">Supported Configurations</span></a>. If you are using pre-compiled binaries <a class="footnote-reference" href="#binary-install" id="id2">[2]</a>, please refer to the <a class="reference internal" href="developers.html#binary-packages"><span class="std std-ref">Binary Packages</span></a> for the compilers used.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Do not change the compiler using <code class="docutils literal"><span class="pre">update-alternatives</span></code> in Ubuntu, as this may affect your DKMS module compatibility with the kernel (among other things) <a class="footnote-reference" href="#update-alt" id="id3">[3]</a>.</p>
</div>
<table class="docutils footnote" frame="void" id="dual-abi" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td><a class="reference external" href="https://stackoverflow.com/q/36159238/7829525">https://stackoverflow.com/q/36159238/7829525</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="binary-install" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[2]</a></td><td><a class="reference internal" href="from_binary.html#binary-installation"><span class="std std-ref">Binary installation (macOS, Ubuntu)</span></a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="update-alt" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id3">[3]</a></td><td><a class="reference external" href="https://askubuntu.com/a/26500/692420">https://askubuntu.com/a/26500/692420</a></td></tr>
</tbody>
</table>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h3><a href="index.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation and Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="gallery.html">Drake Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_help.html">Getting Help</a></li>
<li class="toctree-l1"><a class="reference external" href="doxygen_cxx/index.html#://">API Documentation (C++)</a></li>
<li class="toctree-l1"><a class="reference external" href="pydrake/index.html#://">API Documentation (Python)</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/RobotLocomotion/drake">GitHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="developers.html">For Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="credits.html">Credits</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="python_bindings.html">Using Drake from Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="julia_bindings.html">Using Drake from Julia</a></li>
<li class="toctree-l1"><a class="reference internal" href="matlab_bindings.html">Using Drake from MATLAB</a></li>
</ul>

  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Frequently Asked Questions</a><ul>
<li><a class="reference internal" href="#why-doesn-t-drake-visualizer-work-in-vmware-fusion-or-workstation">Why doesn’t Drake Visualizer work in VMWare Fusion or Workstation?</a></li>
<li><a class="reference internal" href="#why-do-opengl-based-vtk-targets-run-with-bazel-test-sometimes-fail-on-linux">Why do OpenGL-based VTK targets run with <code class="docutils literal"><span class="pre">bazel</span> <span class="pre">test</span></code> sometimes fail on Linux?</a></li>
<li><a class="reference internal" href="#why-do-i-get-linker-errors-when-i-build-a-cmake-project-using-drake-but-i-can-clearly-see-the-symbols">Why do I get linker errors when I build a CMake project using Drake, but I can clearly see the symbols?</a></li>
</ul>
</li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="developers.html" title="For Developers"
             >next</a> |</li>
        <li class="right" >
          <a href="getting_help.html" title="Getting Help"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Drake Documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="getting_help.html" >Getting Help</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright Robot Locomotion Group (MIT).
    </div>
  </body>
</html>