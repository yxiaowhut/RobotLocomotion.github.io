<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Drake: Contact surface constraints</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Drake
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__contact__surface__constraints.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Contact surface constraints<div class="ingroups"><a class="el" href="group__algorithms.html">Algorithms</a> &raquo; <a class="el" href="group__multibody.html">Multibody Dynamics</a> &raquo; <a class="el" href="group__multibody__concepts.html">Multibody Dynamics Concepts</a> &raquo; <a class="el" href="group__constraint__overview.html">Multibody dynamics constraints</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<p>Consider two points pᵢ and pⱼ on rigid bodies i and j, respectively, and assume that at a certain configuration of the two bodies, ᶜq, the two points are coincident at a single location in space, p(ᶜq). </p>
<p>To constrain the motion of pᵢ and pⱼ to the contact surface as the bodies move, one can introduce the constraint g(q) = n(q)ᵀ(pᵢ(q) - pⱼ(q)), where n(q) is the common surface normal expressed in the world frame. gₚ(q) is a unilateral constraint, meaning that complementarity constraints are necessary (see <a class="el" href="group__constraint__types.html">Constraint types</a>):</p><pre>
0 ≤ gₚ  ⊥  λ ≥ 0
</pre><h4>Differentiating gₚ(.) with respect to time</h4>
<p>As usual, gₚ(.) must be differentiated (with respect to time) once to use the contact constraint in velocity-level constraint formulation or twice to use it in a force/acceleration-level formulation. Differentiating gₚ(q) once with respect to time yields:</p><pre>
ġₚ(q,v) = nᵀ(ṗᵢ - ṗⱼ) + ṅᵀ(pᵢ - pⱼ);
</pre><p> one more differentiation with respect to time yields:</p><pre>
g̈ₚ(q,v,v̇) = nᵀ(p̈ᵢ - p̈ⱼ) + 2ṅᵀ(ṗᵢ - ṗⱼ) + n̈ᵀ(pᵢ - pⱼ).
</pre><p>The non-negativity condition on the constraint force magnitudes (λ ≥ 0) keeps the contact force along the contact normal compressive, as is consistent with a non-adhesive contact model.</p>
<p>A more substantial discussion on the kinematics of contact can be found in <a class="el" href="group__constraint__references.html#Pfeiffer1996">[Pfeiffer 1996]</a>, Ch. 4.</p>
<div class="image">
<img src="colliding-boxes.png" alt="colliding-boxes.png"/>
<div class="caption">
Figure 1: Illustration of the interpretation of non-interpenetration constraints when two boxes are interpenetrating (right). The boxes prior to contact are shown at left, and are shown in the middle figure at the initial time of contact; the surface normal n̂ is shown in this figure as well. The bodies interpenetrate over time as the constraint becomes violated (e.g., by constraint drift). Nevertheless, n̂ is tracked over time from its initial direction (and definition relative to the blue body). σ represents the signed distance the bodies must be translated along n̂ so that they are osculating (kissing).</div></div>
 <h4>Constraint softening</h4>
<p>As discussed in discretization, the non-interpenetration constraint can be softened by adding a term to the time derivative of the equation: </p><pre>
0 ≤ ġₚ  ⊥  λ ≥ 0
</pre><p> resulting in:</p><pre>
0 ≤ ġₚ + γλ  ⊥  λ ≥ 0
</pre><p> for γ ≥ 0.</p>
<h4>Constraint stabilization</h4>
<p>As discussed in <a class="el" href="group__constraint__stabilization.html">Constraint stabilization</a>, the drift induced by solving an Index-0 DAE or DCP (that has been reduced from an Index-3 DAE or DCP) can be mitigated through one of several strategies, one of which is Baumgarte Stabilization. The typical application of Baumgarte Stabilization will use the second time derivative of the complementarity condition:</p><pre>
0 ≤ g̈ₚ  ⊥  λ ≥ 0
</pre><p> Baumgarte Stabilization would be layered on top of this equation, resulting in: </p><pre>
0 ≤ g̈ₚ + 2αġₚ + β²gₚ  ⊥  λ ≥ 0
</pre><h4>Effects of constraint softening and stabilization on constraint problem data</h4>
<ul>
<li>Constraint regularization/softening is effected through <code>gammaN</code></li>
<li>Constraint stabilization is effected through <code>kN</code></li>
<li>Note that <em>neither Baumgarte Stabilization nor constraint regularization/ softening affects the definition of g(.)'s Jacobian</em> operators, <code>N_mult</code> and either <code>N_minus_muQ_transpose_mult</code> (for <a class="el" href="structdrake_1_1multibody_1_1constraint_1_1_constraint_accel_problem_data.html">ConstraintAccelProblemData</a>) or <code>N_transpose_mult</code> (for <a class="el" href="structdrake_1_1multibody_1_1constraint_1_1_constraint_vel_problem_data.html">ConstraintVelProblemData</a>) </li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!--HTML footer for doxygen 1.8.13-->
<!--start footer part-->
<div id="nav-path" class="navpath"><!--id is needed for treeview function!-->
  <ul>
    <li class="footer">Generated by
    <a href="https://www.stack.nl/~dimitri/doxygen/">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a></li>
  </ul>
</div>
</body>
</html>
