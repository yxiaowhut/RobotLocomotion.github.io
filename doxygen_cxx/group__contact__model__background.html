<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Drake: The Details of Computing Contact Forces</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Drake
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__contact__model__background.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">The Details of Computing Contact Forces<div class="ingroups"><a class="el" href="group__algorithms.html">Algorithms</a> &raquo; <a class="el" href="group__multibody.html">Multibody Dynamics</a> &raquo; <a class="el" href="group__collision__concepts.html">Collision Concepts (RigidBodyPlant only)</a> &raquo; <a class="el" href="group__drake__contacts.html">Compliant Contact in Drake</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<p>Drake includes a compliant contact model. </p>
<p>Compliant models determine contact forces by assuming that all bodies are, to some extent, pliable. As two bodies collide, they deform and that deformation produces the contact normal force. In practice, this is achieved by allowing <em>undeformed</em> geometry to penetrate and then infer the deformation which would eliminate the penetration and compute the force from that inferred deformation. More particularly, Drake's compliant model is adapted from Simbody's Hertz/Hunt &amp; Crossley/Stribeck model described in [Sherman 2011] with further details drawn directly from [Hunt 1975].</p>
<ul>
<li>[Sherman 2011] M. Sherman, et al. Procedia IUTAM 2:241-261 (2011), Section 5. <a href="http://dx.doi.org/10.1016/j.piutam.2011.04.023">http://dx.doi.org/10.1016/j.piutam.2011.04.023</a></li>
<li>[Hunt 1975] K. H. Hunt and F. R. E. Crossley, "Coefficient of Restitution
  Interpreted as Damping in Vibroimpact," ASME Journal of Applied Mechanics, pp. 440-445, June 1975. <a href="http://dx.doi.org/10.1115/1.3423596">http://dx.doi.org/10.1115/1.3423596</a></li>
</ul>
<p>The model naturally decomposes into the normal and tangential components of the contact force and the discussion follows this decomposition: <a class="el" href="group__contact__model__background.html#contact_normal_force">normal force</a> <a class="el" href="group__contact__model__background.html#tangent_force">tangent force</a>.</p>
<p><a class="anchor" id="contact_normal_force"></a></p><h2>Computing the Normal Component of the Contact Force</h2>
<p><a class="anchor" id="compliant_normal_force_overview"></a></p><h3>Overview of Compliant Normal Force</h3>
<p>Generally, the component of the contact force due to pressure (i.e., <em>not</em> frictional forces) is simply the pressure on the contact surface integrated over that surface's area. If we assume the contact surface is <em>planar</em> then we have a well defined normal direction, and the force due to pressure is parallel with that normal and can be defined precisely as:</p>
<p><code>fₙ = p(q, v)·A(q)</code></p>
<p>where <code>A(q)</code> is the contact patch area, and <code>p(q, v)</code> is the average contact pressure on that patch, the details of which depend on how the contact is characterized (e.g., penetration depth and approaching speed), and the geometry and material parameters of the contacting bodies. Notice there is no approximation in this equation; it is always true since this equation <em>is</em> the definition of the average contact pressure <code>p(q, v)</code>. Thus, determining the contact normal force consists of determining the geometry of the contact patch, and the average pressure on that patch.</p>
<p><a class="anchor" id="hunt_crossley"></a></p><h3>Hunt-Crossley Model</h3>
<p>Drake uses the Hunt-Crossley model [Hunt 1975] for computing a normal force <code>fₙ</code> that accounts for both elasticity and dissipation effects. This is a continuous model based on Hertz elastic contact theory. We'll examine the underlying Hertz contact model and then show its extension.</p>
<p><b>Hertz Contact Model</b></p>
<p>The Hertz contact model applies to scenarios where the contacting surfaces can be <em>locally</em> represented by two principal axes of curvature (e.g., spheres, ellipsoids, cylinders, planes, etc.) For the sake of simplicity, this discussion focuses on spheres where a <em>single</em> radius of curvature (per surface) is sufficient to describe the contacting geometry. The primary advantage of this model is that the magnitude of the normal force can be expressed in closed form.</p>
<p>Consider two spheres made of the same material and of the same size (with Young's modulus E and radius R). If the amount that the two spheres are penetrating is x, then the resultant normal force (according to the Hertz contact model) would be:</p>
<p><code>fₙ = ⁴/₃⋅E⋅√R⋅√x³</code>.</p>
<p>The two spheres compress such that they are touching along a disk with radius <code>√(R⋅x)</code>. Based on this, we can equate it to the earlier function:</p>
<ul>
<li><code>fₙ = p(q, v)·A(q) = ⁴/₃⋅E⋅√R⋅√x³</code></li>
<li><code>p(q, v) = 4/(3π)·E·√(x/R)</code></li>
<li><code>A(q) = π⋅R⋅x</code></li>
</ul>
<p>This can be generalized to spheres of different sizes and different materials by creating <em>effective</em> radii of curvature and Young's modulus. Assuming body i has radius Rᵢ and Young's modulus Eᵢ, we can define an effective radius of curvature and Young's modules as functions of the contacting geometries: <code>R(R₁, R₂)</code> and <code>E(E₁, E₂)</code>, respectively. Generally, the details of those functions depend on the geometry and scenario. See the <a class="el" href="group__drake__contact__implementation.html#drake_contact_model_impl">implementation details</a> below for more details.</p>
<p>This pattern can be extended to contact between other shapes with characteristic radii of curvature:</p>
<ul>
<li>Sphere and plane: same as sphere and sphere with the plane treated as a sphere with infinite radius of curvature.</li>
<li>Two perpendicularly crossed cylinders of <em>equal</em> radius R: same as sphere and sphere of radius R.</li>
<li>Vertical cylinder of radius R and a plane: <code>fₙ = 2⋅E⋅R⋅x</code>.</li>
</ul>
<p><b>Hunt-Crossley Extension</b></p>
<p>The Hunt-Crossley model extends the Hertz contact by adding a dissipation factor which depends on the rate of change of penetration. The resultant force is:</p>
<p><code>fₙ = H(x)(1 + ³/₂⋅d⋅ẋ)</code>,</p>
<p>where <code>H(x)</code> is the Hertz factor appropriate for the contact geometry, <code>x</code> is the penetration depth, <code>ẋ</code> is penetration rate (positive for increasing penetration and negative during rebound), and <code>d</code> is a dissipation term that captures the empirically observed velocity dependence of the coefficient of restitution, <code>e = (1 - d⋅v)</code>, for (small) impact velocity <code>v</code>. <code>d</code> has units of 1/velocity and, in theory at least, can be measured right off the coefficient of restitution-vs.-impact velocity curves; it is the negated slope at low impact velocities.</p>
<p>Please note, <code>d</code> is not a <em>damping</em> coefficient (which would have units of force/velocity), but is a <em>dissipation</em> factor, with units of 1/velocity, modeling power loss as a rate-dependent fraction of the conservative deformation-dependent force. For steel, bronze or ivory, [Hunt 1975] reports values of d between 0.08-0.32 sec/m.</p>
<p>By definition <code>fₙ</code> should always be positive, so that the contact force is a repulsive force. Mathematically, for arbitrary x and ẋ, it is possible for <code>fₙ</code> to become negative, creating an attractive or "sucking" force. This case will be achieved if <code>ẋ &lt; -1/d</code>. To prevent sucking forces, the normal component is clamped to zero. In this regime, it is still possible for there to be a repulsive force for bodies that are drawing apart (<code>ẋ &lt; 0</code>), as long as the relative velocities are small. This approximately models recovery of energy in the deformed material with observed hysteresis effects as described in [Hunt 1975]. However, a surface can't return to its undeformed state arbitrarily quickly. If the bodies are pulled apart <em>faster</em> than the surface can recover, the bodies will separate before the potential energy of deformation can be converted to kinetic energy, resulting in energy loss (to heat, vibration, or other unmodeled effects).</p>
<p><a class="anchor" id="tangent_force"></a></p><h2>Stribeck Friction Tangential Force</h2>
<p>Static friction (or stiction) arises due to surface characteristics at the microscopic level (e.g., mechanical interference of surface imperfections, electrostatic, and/or Van der Waals forces). Two objects in static contact need to have a force <code>fₚ</code> applied parallel to the surface of contact sufficient to <em>break</em> stiction. Once the objects are moving, dynamic (kinetic) friction takes over. It is possible to accelerate one body sliding across another body with a force that would have been too small to break stiction. In essence, stiction will create a contrary force canceling out any force too small to break stiction (see Figure 2).</p>
<div class="image">
<img src="ideal_stiction.png" alt="ideal_stiction.png"/>
<div class="caption">
Figure 2: Idealized Stiction/Sliding Friction Model</div></div>
<p> In <em>idealized</em> stiction, tangent force <code>fₜ</code> is equal and opposite to the pushing force <code>fₚ</code> up to the point where that force is sufficient to break stiction (the red dot in Figure 2). At that point, the tangent force immediately becomes a constant force based on the <em>dynamic</em> coefficient of friction. There are obvious discontinuities in this function which do not occur in reality, but this can be a useful approximation and can be implemented in this form using constraints that can be enabled and disabled discontinuously. However, here we are looking for a continuous model that can produce reasonable behavior using only unconstrained differential equations. With this model we can also capture the empirically-observed Stribeck effect where the friction force declines with increasing slip velocity until it reaches the dynamic friction level.</p>
<div class="image">
<img src="stribeck.png" alt="stribeck.png"/>
<div class="caption">
Figure 3: Stribeck function for stiction</div></div>
<p>The Stribeck model is a variation of Coulomb friction, where the frictional (aka <em>tangential</em>) force is proportional to the normal force as:</p>
<p><code>fₜ = μ⋅fₙ</code></p>
<p>In the Stribeck model, the coefficient of friction, μ, is replaced with a slip speed-dependent function:</p>
<p><code>fₜ = μ(s)⋅fₙ</code>,</p>
<p>where <code>s</code> is a unitless multiple of a <em>new</em> parameter: <em>slip tolerance</em> (<code>vₛ</code>). Rather than modeling <em>perfect</em> stiction, it makes use of an <em>allowable</em> amount of relative motion to approximate stiction. When we refer to "relative motion", we refer specifically to the relative motion of the two points <code>Ac</code> and <code>Bc</code> on the corresponding bodies that are coincident in space with the contact point <code>C</code>.</p>
<p>The function, as illustrated in Figure 3, is a function of the unitless <em>multiple</em> of <code>vₛ</code>. The domain is divided into three intervals:</p>
<ul>
<li><code>s ∈ [0, 1)</code>: the coefficient of friction rises smoothly from zero to the static coefficient of friction, μs.</li>
<li><code>s ∈ [1, 3)</code>: The coefficient of friction falls smoothly from μs to the dynamic (kinetic) coefficient of friction, μd.</li>
<li><code>s ∈ [3, ∞)</code>: Coefficient of friction is held constant at μd.</li>
</ul>
<p>Other than the residual "creep" velocity limited by <code>vₛ</code>, which can be arbitrarily small (in theory; see next section for practical considerations), this model produces a reasonably good approximation of Coulomb friction. Its primary drawback is that the model is numerically very stiff in the stiction region, which requires either small step sizes with an explicit integrator, or use of a more-stable implicit integrator.</p>
<p>Next topic: <a class="el" href="group__drake__contact__implementation.html">Drake Contact Implementation</a> </p>
</div><!-- contents -->
</div><!-- doc-content -->
<!--HTML footer for doxygen 1.8.13-->
<!--start footer part-->
<div id="nav-path" class="navpath"><!--id is needed for treeview function!-->
  <ul>
    <li class="footer">Generated by
    <a href="https://www.stack.nl/~dimitri/doxygen/">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a></li>
  </ul>
</div>
</body>
</html>
