<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Drake: Working with Contacts in Drake</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Drake
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__contact__engineering.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Working with Contacts in Drake<div class="ingroups"><a class="el" href="group__algorithms.html">Algorithms</a> &raquo; <a class="el" href="group__multibody.html">Multibody Dynamics</a> &raquo; <a class="el" href="group__collision__concepts.html">Collision Concepts (RigidBodyPlant only)</a> &raquo; <a class="el" href="group__drake__contacts.html">Compliant Contact in Drake</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<p>The behavior of a simulation with contact will depend on three factors: </p>
<ul>
<li>the choice of integrator,</li>
<li>contact parameters,</li>
<li>nature of collision geometry.</li>
</ul>
<p>The three factors are interdependent; specific choices for one factor may require supporting changes in the other factors.</p>
<p><a class="anchor" id="contact_parameters"></a></p><h2>Contact Parameters</h2>
<p><a class="anchor" id="contact_parameter_lists"></a></p><h3>Parameters</h3>
<p>The determination of contact forces is a combination of per-object contact <em>material</em> parameters and global model parameters. See <a class="el" href="group__contact__model__background.html">The Details of Computing Contact Forces</a> for elaboration on the parameters.</p>
<p><b>Per-object Contact Material Parameters</b></p>
<ul>
<li>Young's modulus, <code>E</code>, (with units of pascals, i.e., N/m²) is the tensile elasticity of the material. It may also be referred to generally as "elasticity" or colloquially as "stiffness".<ul>
<li>Generally, these values can be looked up in a table. Typical values are quite large ranging from soft rubber at 1×10⁷ N/m² to diamond at 1.2×10¹² N/m².</li>
<li>The default value is that of medium rubber: 1×10⁸ N/m².</li>
</ul>
</li>
<li>dissipation, <code>d</code>, (with units of 1/velocity) is a material property that correctly reproduces the empirically observed velocity dependence of the coefficient of restitution, where <code>e = (1-d⋅v)</code> for small impact velocity <code>v</code>.<ul>
<li>In theory, at least, <code>d</code> can be measured right off the coefficient of restitution-vs.-impact velocity curves; it is the negated slope at low impact velocities. In practice, the curve is difficult to produce and very little data exists to provide physical values.</li>
<li>[Hunt 1975] reports values of <code>d</code> between 0.08-0.32 sec/m for steel, bronze or ivory. From this, we advocate relatively small values.</li>
<li>The default value is 0.32 sec/m.</li>
</ul>
</li>
<li>coefficient of static friction, <code>μ_s</code>, (unitless) is the standard Coulomb coefficient of friction for a body with zero relative motion.<ul>
<li>The coefficient of static friction must be greater than or equal to the coefficient of dynamic friction.</li>
<li>The default value 0.9.</li>
</ul>
</li>
<li>coefficient of dynamic friction, <code>μ_d</code>, (unitless) is the standard Coulomb coefficient of friction for a body with non-zero relative motion.<ul>
<li>The coefficient of dynamic friction must be less than or equal to the coefficient of static friction.</li>
<li>The default value is 0.5.</li>
</ul>
</li>
</ul>
<p><b>Global Model Parameters</b></p>
<ul>
<li>slip velocity, <code>vₛ</code>, (with units of m/s) determines the behavior of contact bodies during <em>stiction</em>. Essentially, stiction is approximated. When bodies should be in stiction, the model allows the contacting points a relative slip velocity <em>up to</em> this value. See <a class="el" href="group__contact__model__background.html#tangent_force">tangent_force</a> for details.<ul>
<li>The default value is 0.01 m/s.</li>
</ul>
</li>
<li>characteristic radius, <code>R</code>, (with units of m) defines a characteristic contact patch scale. See <a class="el" href="group__drake__contact__implementation.html">Drake Contact Implementation</a> for details. This defines a circular contact patch with area <code>πR²</code>.<ul>
<li>The default value is 0.2 mm (e.g., 2×10⁻⁴ m).</li>
</ul>
</li>
</ul>
<p><a class="anchor" id="contact_parameter_choices"></a></p><h3>Issues with Parameter Values</h3>
<ul>
<li><p class="startli"><b>Contact Material Parameters</b></p>
<p class="startli">With the exception of the dissipation parameter, the values for material parameters should be predicated on realistic values. The majority of these values can and should be looked up in tables. The goal is for these physical quantities to remain meaningful and constant while the underlying contact model implementation improves and makes better use of them.</p>
<p class="startli">As for the dissipation parameter, we generally recommend leaving it at the default value unless there's particular insight and principle in changing it.</p>
</li>
<li><p class="startli"><b>Picking a good value for <code>vₛ</code></b></p>
<p class="startli">In selecting a value for <code>vₛ</code>, you must ask yourself the question, "When two objects are ostensibly in stiction, how much slip am I willing to allow?" There are two opposing design issues in picking a value for <code>vₛ</code>. On the one hand, small values of <code>vₛ</code> make the problem numerically stiff during stiction, potentially increasing the integration cost. On the other hand, it should be picked to be appropriate for the scale of the problem. For example, a car simulation could allow a "large" value for <code>vₛ</code> of 1 cm/s (1×10⁻² m/s), but reasonable stiction for grasping a 10 cm box might require limiting residual slip to 1×10⁻³ m/s or less. Ultimately, picking the largest viable value will allow your simulation to run faster.</p>
</li>
<li><p class="startli"><b>Picking a good value for <code>R</code></b></p>
<p class="startli">One of the quirks of the implemented contact model, is that is largely unaware of the size of the contact surface between bodies. However, the contact force <em>depends</em> on that area. This <em>global</em> setting allows you to hint to the model the size of the contact patches; larger contact patches produce larger contact forces. For example, a small toy tire on a table has a much smaller contact patch than full-size tires on a road. Even if we assume the same rubber, the full-size tires would experience a larger contact force (all other factors being equal). Rather than increasing the Young's modulus for the car's tires (as compared to the rubber ball), we recommend increasing the characteristic radius in the contact model. As a word of warning, don't think of this characteristic radius as corresponding to a literal measure of the real world. The default size corresponds closely with a point contact (where the contact is roughly the area of the head of a pin). This small contact area is sufficient for manipulation even though it does not reasonably represent the physical world. If the forces seem weak, increase the characteristic size, but only increase it to the smallest value that gives sufficient forces; making it larger will make the forces stiffer which will lead to a more computationally expensive simulation.</p>
</li>
</ul>
<p><a class="anchor" id="integrator_choice"></a></p><h2>Choice of Integrator</h2>
<p>Empirical evidence suggests that any integrator <em>except</em> <a class="el" href="classdrake_1_1systems_1_1_explicit_euler_integrator.html">ExplicitEulerIntegrator</a> can work with this contact model. Generally, the <a class="el" href="classdrake_1_1systems_1_1_runge_kutta2_integrator.html">RungeKutta2Integrator</a> and <a class="el" href="classdrake_1_1systems_1_1_semi_explicit_euler_integrator.html">SemiExplicitEulerIntegrator</a> require similar time steps to produce equivalent behavior. Generally, for a <code>vₛ</code> value of 1e-2 m/s, a timestep on the order of 1e-4 is required for both of these. The error-controlled <a class="el" href="classdrake_1_1systems_1_1_runge_kutta3_integrator.html">RungeKutta3Integrator</a> will choose very small steps and accuracy must be set tight enough to ensure stability. There is also a first-order, fully-implicit integrator: <a class="el" href="classdrake_1_1systems_1_1_implicit_euler_integrator.html">ImplicitEulerIntegrator</a> that can be considered for handling stiff systems.</p>
<p><a class="anchor" id="crafting_collision_geometry"></a></p><h2>Choosing the Right Collision Geometry</h2>
<p>The compliant point contact model only reports a single contact between bodies. More particularly, the contact is characterized by a single point. The point is associated with a characteristic area in the model (see above). This has two implications:</p>
<ul>
<li><p class="startli"><b>Sampled contact area</b></p>
<p class="startli">Increasing the area associated with the point will increase the magnitude of the contact force. An alternative solution is to increase the number of collision geometries associated with a body such that each point corresponds to a smaller portion of the body's surface area. This essentially changes the interpretation of the point to be closer in line with a smaller characteristic area.</p>
<p class="startli">This would have particular value if your simulation scenario has contacts of disparate scales. A single, global characteristic radius may be insufficient. By increasing the samples on large contact patches, those contact points will be compatible with the smaller characteristic area which works for the small contact patches.</p>
</li>
<li><p class="startli"><b>Surface-on-surface contacts</b></p>
<p class="startli">If the contact between bodies is better characterized as a surface instead of a point (such as one box lying on another), the contact point will</p><ul>
<li>not be guaranteed to be at the center of pressure, possibly inducing unrealistic torque, and</li>
<li>not be temporally coherent. This will lead to instability artifacts which can only be addressed through smaller time steps.</li>
</ul>
<p class="startli">Both of these issues can be addressed by changing the geometry that represent the body's contact surface. For some shapes (e.g., boxes), we can introduce two sets of collision elements: discrete "points" at the corners, and a box capturing the volume (see <code>block_for_pick_and_place.urdf</code> as an example). With this strategy, the contact "points" are actually small-radius spheres. The volume-capturing box should actually be inset from those spheres such that when the box is lying on a plane (such that the logical contact manifold would be a face), only the contact points make contact, providing reliable points of contact. However, for arbitrary configurations contact with the box will provide more general contact.</p>
</li>
</ul>
<p>Next topic: <a class="el" href="group__contact__model__background.html">The Details of Computing Contact Forces</a> </p>
</div><!-- contents -->
</div><!-- doc-content -->
<!--HTML footer for doxygen 1.8.13-->
<!--start footer part-->
<div id="nav-path" class="navpath"><!--id is needed for treeview function!-->
  <ul>
    <li class="footer">Generated by
    <a href="https://www.stack.nl/~dimitri/doxygen/">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a></li>
  </ul>
</div>
</body>
</html>
