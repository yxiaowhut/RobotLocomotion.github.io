<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Drake: drake/automotive/maliput/multilane/loader.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Drake
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('multilane_2loader_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">loader.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;memory&gt;</code><br />
<code>#include &lt;string&gt;</code><br />
<code>#include &quot;<a class="el" href="multilane_2builder_8h.html">drake/automotive/maliput/multilane/builder.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for loader.h:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="multilane_2loader_8h__incl.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="multilane_2loader_8h__dep__incl.svg" width="100%" height="417"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespacedrake"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedrake.html">drake</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:namespacedrake_1_1maliput"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedrake_1_1maliput.html">drake::maliput</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:namespacedrake_1_1maliput_1_1api"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedrake_1_1maliput_1_1api.html">drake::maliput::api</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:namespacedrake_1_1maliput_1_1multilane"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedrake_1_1maliput_1_1multilane.html">drake::maliput::multilane</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a034a42c5b4901fd03dd3ada497c1cf65"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; const api::RoadGeometry &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedrake_1_1maliput_1_1multilane.html#a034a42c5b4901fd03dd3ada497c1cf65">Load</a> (const BuilderFactoryBase &amp;builder_factory, const std::string &amp;input)</td></tr>
<tr class="memdesc:a034a42c5b4901fd03dd3ada497c1cf65"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads the <code>input</code> string as a maliput_multilane_builder document using the provided <code>builder_factory</code>.  <a href="namespacedrake_1_1maliput_1_1multilane.html#a034a42c5b4901fd03dd3ada497c1cf65">More...</a><br /></td></tr>
<tr class="separator:a034a42c5b4901fd03dd3ada497c1cf65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2eabcbf6793594cc9cc5832b3c13545d"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; const api::RoadGeometry &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedrake_1_1maliput_1_1multilane.html#a2eabcbf6793594cc9cc5832b3c13545d">LoadFile</a> (const BuilderFactoryBase &amp;builder_factory, const std::string &amp;filename)</td></tr>
<tr class="memdesc:a2eabcbf6793594cc9cc5832b3c13545d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads the named file as a maliput_multilane_builder document using the provided <code>builder_factory</code>.  <a href="namespacedrake_1_1maliput_1_1multilane.html#a2eabcbf6793594cc9cc5832b3c13545d">More...</a><br /></td></tr>
<tr class="separator:a2eabcbf6793594cc9cc5832b3c13545d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h1>Multilane <a class="el" href="namespace_y_a_m_l.html">YAML</a> Format Specification</h1>
<h2>Introduction</h2>
<p>Multilane is a backend implementation of Maliput, an interface to describe road geometries. Multilane provides two loader methods ( <a class="el" href="namespacedrake_1_1maliput_1_1multilane.html#a034a42c5b4901fd03dd3ada497c1cf65">Load()</a> and <a class="el" href="namespacedrake_1_1maliput_1_1multilane.html#a2eabcbf6793594cc9cc5832b3c13545d">LoadFile()</a> ) that will parse a <a class="el" href="namespace_y_a_m_l.html">YAML</a> file or string by calling appropriate <a class="el" href="classdrake_1_1maliput_1_1multilane_1_1_builder.html">Builder</a> methods to create a <code>RoadGeometry</code>.</p>
<p>The serialization is a fairly straightforward mapping of the <a class="el" href="classdrake_1_1maliput_1_1multilane_1_1_builder.html">Builder</a> interface onto <a class="el" href="namespace_y_a_m_l.html">YAML</a>.</p>
<p>The basic idea is, however:</p>
<ul>
<li>general parameters (i.e., lane_width, elevation bounds, linear and angular tolerance)</li>
<li>a collection of named 'points', which are specifications of explicitly named Endpoints</li>
<li>a collection of named 'connections', whose start Endpoints are specified by reference to either a named Endpoint or the start or end of a named Connection</li>
<li>a collection of named 'groups', specified by sequences of named Connections</li>
</ul>
<p>Parsing will fail if there is no way to concretely resolve all of the Endpoint references, e.g., if a document specifies that Connection-A is an arc starting at the end of Connection-B and that Connection-B is an arc starting at the end of Connection-A. All referential chains must bottom out in explicitly-named Endpoints.</p>
<h2>General considerations</h2>
<p>All the road geometry information must be under a root node called <code>maliput_multilane_builder</code>, otherwise it will not be parsed.</p>
<h3>Units</h3>
<p>The following list shows the expected units for floating-point quantities:</p>
<ul>
<li>Positions, distances and lengths: meters [m].</li>
<li>Angles: degrees [°] (no minutes nor seconds, just degrees).</li>
<li>Derivatives of positions: meters per meter [m/m] (i.e., a unitless slope).</li>
<li>Derivatives of angles: degrees per meter [°/m].</li>
</ul>
<p>All positions, distances, lengths, angles and derivatives are floating point numbers. Other type of quantities will be integers.</p>
<h3>Miscellaneous</h3>
<p>Clarifications to better understand the nomenclature used within this description:</p>
<ul>
<li>In code snippets, strings in capital letters represent values that the <a class="el" href="namespace_y_a_m_l.html">YAML</a> writer must choose and the others are keywords to be parsed.</li>
<li>When referring to keywords in the <a class="el" href="namespace_y_a_m_l.html">YAML</a>, <code>non-capitalized</code> strings will be used.</li>
<li>When referring to types within <code>maliput</code>, <code>Capitalized</code> strings will be used.</li>
</ul>
<h3>Coordinates and frames</h3>
<p>For points in space, a right handed, orthonormal and inertial ℝ³ frame is used. Its basis is (x̂, ŷ, ẑ), where x̂, ŷ are coplanar with the ground and ẑ points upwards, and positions are expressed as <code>(x, y, z)</code> triples. Also, the Θ angle rotating around the ẑ axis is used to define headings. These rotations are right handed and an angle of 0° points in the x̂ direction. Angles with respect to a plane parallel to <code>z = 0</code> can be defined. A heading vector pointing the direction of the lane at that point is used as rotation axis and the angle is clockwise. Those will express superelevation.</p>
<h2>Example of General Structure</h2>
<p>Below you can see a snippet with the general <a class="el" href="namespace_y_a_m_l.html">YAML</a> structure.</p>
<div class="fragment"><div class="line">maliput_multilane_builder:</div><div class="line"> id: &quot;my_road_geometry&quot;</div><div class="line"> lane_width: 3.2</div><div class="line"> left_shoulder: 1.25</div><div class="line"> right_shoulder: 2.47</div><div class="line"> elevation_bounds: [0., 7.6]</div><div class="line"> scale_length: 1.</div><div class="line"> linear_tolerance: 0.1</div><div class="line"> angular_tolerance: 0.1</div><div class="line"> computation_policy: prefer-accuracy</div><div class="line"> points:</div><div class="line">   point_a:</div><div class="line">     xypoint: [0, 0, 0]</div><div class="line">     zpoint: [0, 0, 0, 0]</div><div class="line">   point_b:</div><div class="line">     xypoint: [50, 5, 0]</div><div class="line">     zpoint: [0, 0, 0]</div><div class="line">   ...</div><div class="line"> connections:</div><div class="line">   conn_a:</div><div class="line">      left_shoulder: 1.3 # Optional</div><div class="line">      lanes: [3, 2, -5.3]</div><div class="line">      start: [&quot;lane.1&quot;, &quot;points.point_a.forward&quot;]</div><div class="line">      arc: [30.25, -45]</div><div class="line">      z_end: [&quot;lane.0&quot;, [0, 3, 30, 3.1]]</div><div class="line">   conn_b:</div><div class="line">   ...</div><div class="line"> groups:</div><div class="line">   group_A: [conn_a, conn_b]</div></div><!-- fragment --><h2>Entities</h2>
<h3><code>maliput_multilane_builder</code></h3>
<p><code>maliput_multilane_builder</code> holds all the common and default configurations to build a <code>RoadGeometry</code>. All of them, except <code>groups</code>, must be defined though some of them may be empty.</p>
<p>It will be represented as a mapping:</p>
<div class="fragment"><div class="line">maliput_multilane_builder:</div><div class="line"> id: &quot;ID&quot;</div><div class="line"> lane_width: LW</div><div class="line"> left_shoulder: LS</div><div class="line"> right_shoulder: RS</div><div class="line"> elevation_bounds: [EB_MIN, EB_MAX]</div><div class="line"> linear_tolerance: LT</div><div class="line"> angular_tolerance: AT</div><div class="line"> scale_length: SL</div><div class="line"> computation_policy: CP</div><div class="line"> points:</div><div class="line">   ...</div><div class="line"> connections:</div><div class="line">   ...</div><div class="line"> groups:</div><div class="line">   ...</div></div><!-- fragment --><p>Where:</p>
<ul>
<li><em>ID</em> is a string scalar that defines the <em>ID</em> of the <code>RoadGeometry</code>.</li>
<li><em>LW</em> is the width of the lanes. Lane’s centerline will be placed at the same lane width distance one from the other. It must be non negative.</li>
<li><em>LS</em> and <em>RS</em> are default left and right shoulders are extra spaces added to the right of the last lane and left to the first lane respectively. Their purpose is to increase driveable bounds. Both must be non negative.</li>
<li><em>EB_MIN</em> and <em>EB_MAX</em> define minimum and maximum height values of the road’s volume. The minimum value must be non positive, thus the maximum must be non negative.</li>
<li><em>LT</em> and <em>AT</em> are position and orientation tolerances which are non negative numbers that define the error of mapping a world coordinate or orientation in a custom lane-frame.</li>
<li><em>SL</em> is the minimum spatial period of variation in <code>connections</code>' reference curve.</li>
<li>A <em>CP</em> label, which could either be <code>prefer-accuracy</code> or <code>prefer-speed</code> The former guides the computations to be as accurate as precision states. The latter will be accurate whenever possible, but it's not guaranteed in favor of faster computations.</li>
<li><em>points</em> is a map of <code>endpoint</code>s to build <code>connection</code>s. At least one point is required to anchor the connections to world-frame.</li>
<li><em>connections</em> is a map that holds all the <code>connection</code> definitions. It may be empty if no <code>Connection</code> is going to be defined.</li>
<li><em>groups</em> is a map of <code>groups</code> where <code>connections</code> can be put together. It may be empty or not defined if no group is going to be made.</li>
</ul>
<h3><code>points</code></h3>
<p>A collection of points in 3D space. Each one will be under a tag (used to reference it within <code>connection</code> description) and defined by an <code>endpoint_xy</code> and a <code>endpoint_z</code>. Both sequences must be provided.</p>
<p>It will be represented as a mapping like:</p>
<div class="fragment"><div class="line">endpoint:</div><div class="line">  xypoint: [X, Y, THETHA]</div><div class="line">  zpoint: [Z, Z_DOT, THETA, THETA_DOT]</div></div><!-- fragment --><p>Where:</p>
<ul>
<li><code>xypoint</code> is the <code>endpoint_xy</code> sequence.</li>
<li><code>zpoint</code> is the <code>endpoint_z</code> sequence.</li>
</ul>
<h3><code>endpoint_xy</code></h3>
<p>A point in the plane <code>z = 0</code> expressed as <code>(x, y, Θ)</code>, where <code>(x, y)</code> defines the position and Θ defines the heading angle of the endpoint. All coordinates must be provided.</p>
<p>It will be represented as a sequence:</p>
<div class="fragment"><div class="line">endpoint_xy: [X, Y, THETA]</div></div><!-- fragment --><p>Where:</p>
<ul>
<li><em>X</em> is the <code>x</code> coordinate.</li>
<li><em>Y</em> is the <code>y</code> coordinate.</li>
<li><em>THETA</em> is the Θ coordinate.</li>
</ul>
<h3><code>endpoint_z</code></h3>
<p>Specifies elevation, slope, superelevation and its speed of change at a point over the plane <code>z = 0</code> as `(z, z', Θ, Θ')<code>, where</code>z` and Θ' are the elevation and superelevation of the road at the endpoint and <code>z'</code> and Θ' are their respective derivatives with respect to an arc-length coordinate <code>t</code> that travels along curve’s projection over the <code>z = 0</code> plane. All coordinates must be provided.</p>
<p>It will be represented as a sequence:</p>
<div class="fragment"><div class="line">endpoint_z: [Z, Z_DOT, THETA, THETA_DOT]</div></div><!-- fragment --><p>Where:</p>
<ul>
<li><em>Z</em> is the <code>z</code> coordinate.</li>
<li><em>Z_DOT</em> is the <code>z′</code> coordinate.</li>
<li><em>THETA</em> is the Θ coordinate.</li>
<li><em>THETA_DOT</em> is the Θ′ coordinate. This parameter is optional, and typically should be omitted. When omitted, this value will be automatically calculated such that <em>G1</em> continuity of the road surface is preserved.</li>
</ul>
<h3><code>connections</code></h3>
<p>A <code>connection</code> defines a <code>Segment</code> and must provide the number of lanes, start <code>endpoint</code> and end <code>endpoint_z</code> information. Either line <code>length</code> or <code>arc</code> must be provided to define the planar geometry of that <code>connection</code>. Optional extra information can also provided and it will modify the way the <code>connection</code> will be created. <code>connections</code> is a collection of <code>connection</code>s and those will be identified by their tag. Each tag will name a <code>connection</code>, can be referenced by other <code>connection</code>s and to create <code>group</code>s, and will be used as <code>Segment</code>'s ID as well.</p>
<p><code>start</code> <code>endpoint</code> and <code>end</code> <code>endpoint_z</code> can either refer to a reference road curve or to the lane start and end <code>Endpoint</code>s. When only <code>start</code> and <code>z_end</code> or <code>explicit_end</code> are provided, those will refer to the reference road curve of the <code>Connection</code>. <code>r_ref</code> can be provided to state the offset distance from the reference road curve to <code>ref_lane</code> <code>connection</code>’s lane. Lanes are 0-indexed. In addition, left and right shoulder distances can be provided and those will override default values. <code>left_shoulder</code> and <code>right_shoulder</code> must be bigger or equal to zero if provided.</p>
<p>Sample line-connections mapping are shown below:</p>
<ul>
<li>Example 1: reference curve from points.</li>
</ul>
<div class="fragment"><div class="line">CONNECTION_NAME:</div><div class="line">  left_shoulder: LS</div><div class="line">  right_shoulder: RS</div><div class="line">  lanes: [NL, NREF, RREF]</div><div class="line">  start: [&quot;ref&quot;, &quot;points.POINT_NAME_1.(forward|reverse)&quot;]</div><div class="line">  length: L</div><div class="line">  z_end: [&quot;ref&quot;, [Z, Z_DOT, THETA, THETA_DOT]]</div><div class="line">  # The following can be used instead of z_end:</div><div class="line">  # explicit_end: [&quot;ref&quot;, &quot;points.POINT_NAME_2.(forward|reverse)&quot;]</div></div><!-- fragment --><p>Within <code>z_end</code>, <em>THETA_DOT</em> is optional, and typically should be omitted. When omitted, this value will be automatically calculated such that <em>G1</em> continuity of the road surface is preserved. Otherwise, provided <em>THETA_DOT</em> will be used and the <a class="el" href="classdrake_1_1maliput_1_1multilane_1_1_builder.html">Builder</a> will check whether or not <em>G1</em> is preserved.</p>
<p>When <code>explicit_end</code> is used, <em>THETA_DOT</em> will be set by <a class="el" href="classdrake_1_1maliput_1_1multilane_1_1_builder.html">Builder</a> to preserve <em>G1</em> road surface continuity.</p>
<ul>
<li>Example 2: reference curve from connections.</li>
</ul>
<div class="fragment"><div class="line">CONNECTION_NAME:</div><div class="line">  left_shoulder: LS</div><div class="line">  right_shoulder: RS</div><div class="line">  lanes: [NL, NREF, RREF]</div><div class="line">  start: [</div><div class="line">    &quot;ref&quot;,</div><div class="line">    &quot;connections.CONN_NAME_1.(start|end).ref.(forward|reverse)&quot;</div><div class="line">  ]</div><div class="line">  length: L</div><div class="line">  explicit_end: [</div><div class="line">    &quot;ref&quot;,</div><div class="line">    &quot;connections.CONN_NAME_2.(start|end).ref.(forward|reverse)&quot;</div><div class="line">  ]</div><div class="line">  # The following can be used instead of explicit_end:</div><div class="line">  # z_end: [&quot;ref&quot;, [Z, Z_DOT, THETA, THETA_DOT]]</div></div><!-- fragment --><p>Within <code>z_end</code>, <em>THETA_DOT</em> is optional, and typically should be omitted. When omitted, this value will be automatically calculated such that <em>G1</em> continuity of the road surface is preserved. Otherwise, provided <em>THETA_DOT</em> will be used and the <a class="el" href="classdrake_1_1maliput_1_1multilane_1_1_builder.html">Builder</a> will check whether or not <em>G1</em> is preserved.</p>
<p>When <code>explicit_end</code> is used, <em>THETA_DOT</em> will be set by <a class="el" href="classdrake_1_1maliput_1_1multilane_1_1_builder.html">Builder</a> to preserve <em>G1</em> continuity of the road surface.</p>
<ul>
<li>Example 3: lane curve from points.</li>
</ul>
<div class="fragment"><div class="line">CONNECTION_NAME:</div><div class="line">  left_shoulder: LS</div><div class="line">  right_shoulder: RS</div><div class="line">  lanes: [NL, NREF, RREF]</div><div class="line">  start: [&quot;lane.LN_1&quot;, &quot;points.POINT_NAME_1.(forward|reverse)&quot;]</div><div class="line">  length: L</div><div class="line">  z_end: [&quot;lane.LN_2&quot;, [Z, Z_DOT, THETA]]</div><div class="line">  # The following can be used instead of z_end:</div><div class="line">  # explicit_end: [&quot;lane.LN_2&quot;, &quot;points.POINT_NAME_2.(forward|reverse)&quot;]</div></div><!-- fragment --><p>None of the lane-based flavors allow to have <em>THETA_DOT</em> at either <code>start</code> or <code>z_end</code>. <a class="el" href="classdrake_1_1maliput_1_1multilane_1_1_builder.html">Builder</a> will adjust them to preserve <em>G1</em> continuity of the road surface.</p>
<ul>
<li>Example 4: lane curve from other connections' lane curves.</li>
</ul>
<div class="fragment"><div class="line">CONNECTION_NAME:</div><div class="line">  left_shoulder: LS</div><div class="line">  right_shoulder: RS</div><div class="line">  lanes: [NL, NREF, RREF]</div><div class="line">  start: [</div><div class="line">    &quot;lane.LN_1&quot;,</div><div class="line">    &quot;connections.CONN_NAME_1.(start|end).LN_2.(forward|reverse)&quot;</div><div class="line">  ]</div><div class="line">  length: L</div><div class="line">  explicit_end: [</div><div class="line">    &quot;lane.LN_2&quot;,</div><div class="line">    &quot;connections.CONN_NAME_2.(start|end).LN_4.(forward|reverse)&quot;</div><div class="line">  ]</div><div class="line">  # The following can be used instead of explicit_end:</div><div class="line">  # z_end: [&quot;lane.LN_2&quot;, [Z, Z_DOT, THETA]]</div></div><!-- fragment --><p>None of the lane-based flavors allow to have <em>THETA_DOT</em> at either <code>start</code> or <code>z_end</code>. <a class="el" href="classdrake_1_1maliput_1_1multilane_1_1_builder.html">Builder</a> will adjust them to preserve <em>G1</em> continuity of the road surface.</p>
<p>From examples above:</p>
<ul>
<li><code>lanes</code> holds number of lanes, reference lane and distance from the reference lane to the reference curve.</li>
<li><code>left_shoulder</code> is the extra space at the right side of the last lane of the connection. It will override default values.</li>
<li><code>right_shoulder</code> is the extra space at the left side of the first lane of the <code>connection</code>. It will override default values.</li>
<li><code>start</code> is used to define the start <code>endpoint</code> of one the <code>connection</code>’s curves. It may have multiple options. Those can be split into two elements:<ul>
<li>The first element could be:<ol type="1">
<li><code>ref</code> to point the reference curve.</li>
<li><code>lane.LN</code> to point a specific lane.<br />
</li>
</ol>
</li>
<li>The second element is composed of one of the following options:<ol type="1">
<li>A reference to an <code>endpoint</code> in the points collection. Either <code>forward</code> or <code>reverse</code> should be used to indicate the direction of the <code>endpoint</code>.</li>
<li>The start or end <code>endpoint</code> of a <code>connection</code>’s reference curve or lane. Either forward or reverse should be used to indicate the direction of the <code>endpoint</code>. When using the forward the <code>endpoint</code> will be used as is. Otherwise (using <code>reverse</code>) the <code>Endpoint</code> will be reversed.</li>
</ol>
</li>
</ul>
</li>
<li><code>length</code> is the <code>connection</code>’s reference road curve planar line length.</li>
<li><code>arc</code> is the <code>connection</code>’s reference curve planar piece of arc.</li>
<li><code>z_end</code> is the <code>endpoint_z</code> information to end one of the <code>connection</code>’s curves. It is composed of two elements too. The first one points to the reference curve when <code>ref</code> is present. Otherwise, <code>lane.LN</code> must be specified.</li>
<li><code>explicit_end</code> is a node similar to <code>start</code>. It is composed of two parts. The first one points to the reference curve when <code>ref</code> is present. Otherwise, <code>lane.LN</code> must be specified. The second part is used to point the <code>endpoint</code> information which could be provided by a <code>connection</code> or the <code>points</code> collection. When using a <code>connection</code>, two options are available: the reference curve or a lane.</li>
</ul>
<p>Possible combinations to define a <code>connection</code> node are:</p>
<ul>
<li>Each <code>connection</code> must have either <code>length</code> or <code>arc</code>.</li>
<li>Each <code>connection</code> must have either <code>z_end</code> or <code>explicit_end</code>.</li>
<li><code>start</code> and <code>explicit_end</code> possible combinations:<ol type="1">
<li>This LANE from other LANE.</li>
<li>This REF from other REF.</li>
<li>This LANE from POINT.</li>
<li>This REF from POINT.</li>
</ol>
</li>
</ul>
<p>At least one connection must <em>start</em> with "LANE from POINT" or "REF from
POINT" in order to anchor the road geometry in the world frame.</p>
<h3><code>arc</code></h3>
<p>Constant radius arcs are defined in terms of a radius and an angle span. <code>arc</code>s are used to define planar curves on the the <code>z = 0</code> plane, starting from an <code>endpoint_xy</code>. Radius must be positive, and arc's center would be to the left (i.e. rotating +90° start <code>endpoint_xy</code>’s heading vector) when theta is positive, otherwise it would be to the right (i.e. rotating -90° start <code>endpoint_xy</code>’s heading).</p>
<p>It will be represented as a sequence:</p>
<div class="fragment"><div class="line">arc: [RADIUS, THETA]</div></div><!-- fragment --><p>Where:</p>
<ul>
<li><em>RADIUS</em> is the radius of the <code>arc</code>.</li>
<li><em>THETA</em> is the angle span of the <code>arc</code>.</li>
</ul>
<h3><code>groups</code></h3>
<p>A group specifies a set of connections whose Segments will be placed together in the same <code>Junction</code>. A <code>connection</code> may only belong to a single <code>group</code>. If a <code>connection</code> is not in any <code>group</code>, its <code>Segment</code> will receive its own <code>Junction</code>.</p>
<p>It will be represented as a mapping:</p>
<div class="fragment"><div class="line">GROUP_NAME: [C_1, C_2, C_3]</div></div><!-- fragment --><p>Where:</p>
<ul>
<li><code>C\_1</code>, <code>C\_2</code>, <code>C\_3</code> are <code>connections</code>’ IDs. </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!--HTML footer for doxygen 1.8.13-->
<!--start footer part-->
<div id="nav-path" class="navpath"><!--id is needed for treeview function!-->
  <ul>
    <li class="navelem"><a class="el" href="dir_f1666844dc41ec91c14125b680b7be1b.html">drake</a></li><li class="navelem"><a class="el" href="dir_591c7a9d715c1a20315be44d04438991.html">automotive</a></li><li class="navelem"><a class="el" href="dir_4d30b6eba57ad73dabd3ccac6b6f05d2.html">maliput</a></li><li class="navelem"><a class="el" href="dir_ec94a9eb6390388c7e8576d427777b5f.html">multilane</a></li><li class="navelem"><a class="el" href="multilane_2loader_8h.html">loader.h</a></li>
    <li class="footer">Generated by
    <a href="https://www.stack.nl/~dimitri/doxygen/">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a></li>
  </ul>
</div>
</body>
</html>
